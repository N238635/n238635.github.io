<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"></script>

<body>
    <div>IFRAME:</div>
    <div id="test"></div>
    <script type="text/javascript">
        function listener(event) {
            if (!event.data.id) {
                console.log('Неверное сообщение!');
                return;
            }

            console.log('Iframe получил: ', event.data);

            if (window.removeEventListener) {
                console.log('Iframe перестал слушать!');
                window.removeEventListener("message", listener, false);
            }

            document.getElementById("test").innerHTML = `Получил от ${event.origin} пользователя ${event.data.name} ID: ${event.data.id}`;
        }

        console.log('Iframe начал слушать!');
        if (window.addEventListener) {
            window.addEventListener("message", listener, false);
        } else { // ie 8
            window.attachEvent("onmessage", listener);
        }

        parent.postMessage({ init: true }, '*');
    </script>
</body>

</html>